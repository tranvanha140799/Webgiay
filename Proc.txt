CREATE PROC Create_Product
    @id varchar(20),
    @name nvarchar(250),
    @description nvarchar(250),
    @price decimal(18,0),
    @promotionprice decimal(18,2),
    @img1 nvarchar(250),
    @img2 nvarchar(250),
    @stock int,
    @meta nvarchar(250),
    @status bit,
    @cate int
AS
BEGIN
    INSERT dbo.PRODUCT
    VALUES
        (
            @id, @name, @description,
            @price, @promotionprice , 5,
            @img1, @img2,
            @stock, @meta, @status, 0, getdate(), @cate
)
END 
GO
-- Update sp
CREATE PROC Update_Product
    @id varchar(20),
    @name nvarchar(250),
    @description nvarchar(250),
    @price decimal(18,0),
    @promotionprice decimal(18,2),
    @img1 nvarchar(250),
    @img2 nvarchar(250),
    @stock int,
    @meta nvarchar(250),
    @status bit,
    @cate int
AS
BEGIN
    UPDATE dbo.PRODUCT
SET
    dbo.PRODUCT.ProductName = @name, 
    dbo.PRODUCT.ProductDescription = @description, 
    dbo.PRODUCT.ProductPrice = @price,
    dbo.PRODUCT.PromotionPrice = @promotionprice,
    dbo.PRODUCT.ShowImage_1 = @img1,
    dbo.PRODUCT.ShowImage_2 = @img2, 
    dbo.PRODUCT.ProductStock = @stock, 
    dbo.PRODUCT.MetaKeyword = @meta, 
    dbo.PRODUCT.ProductStatus = @status, 
    dbo.PRODUCT.CreatedDate = getdate(), -- DATETIME
    dbo.PRODUCT.CategoryID = @cate
	WHERE dbo.PRODUCT.ProductID = @id
END
GO
-- Delete sp
CREATE PROC Delete_Product
    @id varchar(20)
AS
BEGIN
    DELETE dbo.PRODUCT WHERE dbo.PRODUCT.ProductID=@id
END
GO
CREATE PROC LoadProd_ByID
    @id varchar(20)
AS
BEGIN
    SELECT *
    FROM dbo.PRODUCT p
    WHERE p.ProductID=@id
END
GO
CREATE PROC ProductList
AS
BEGIN
    SELECT *
    FROM dbo.PRODUCT p
END 
GO

CREATE PROC Add_ProductDetail
    @prodID varchar(20),
    @sizeID int
AS
BEGIN
    INSERT dbo.PRODUCTDETAIL
        (
        --ProductDetailID - column value is auto-generated
        ProductID,
        SizeID
        )
    VALUES
        (
            -- ProductDetailID - INT
            @prodID, -- ProductID - INT
            @sizeID -- SizeID - INT
)
END
GO

CREATE PROC Update_ProductDetail
    @prodID varchar(20),
    @sizeID int
AS
BEGIN
    UPDATE dbo.PRODUCTDETAIL
SET
    dbo.PRODUCTDETAIL.SizeID = @sizeID-- INT
	WHERE dbo.PRODUCTDETAIL.ProductID=@prodID
END
GO

CREATE PROC Delete_ProductDetail
    @prodID varchar(20)
AS
BEGIN
    DELETE FROM dbo.PRODUCTDETAIL
WHERE dbo.PRODUCTDETAIL.ProductID=@prodID
END
GO

CREATE PROC LoadSize_ByProdID
    @prodID varchar(20)
AS
BEGIN
    SELECT *
    FROM dbo.PRODUCTDETAIL p
    WHERE p.ProductID=@prodID
END
GO

CREATE PROC CategoryList
AS
BEGIN
    SELECT *
    FROM dbo.CATEGORY c
END
GO
CREATE PROC SizeList
AS
BEGIN
    SELECT *
    FROM dbo.SIZE s
END 
GO

CREATE PROC Add_Order
    @cusID int,
    @total decimal(18,2),
    @ReturnID INT OUTPUT
AS
BEGIN
    SET NOCOUNT ON;
    INSERT dbo.[ORDER]
    VALUES
        (
            GETDATE(),
            GETDATE(),
            @total,
            1,
            @cusID
        )
    SET @ReturnID = SCOPE_IDENTITY()
    SELECT @ReturnID
END 
GO

CREATE PROC Add_OrderDetail
    @orderID int,
    @prodID varchar(20),
    @sizeID int,
    @quantity int
AS
BEGIN
    INSERT dbo.ORDERDETAIL
        (
        --DetailID - column value is auto-generated
        Quantity,
        OrderID,
        SizeID,
        ProductID
        )
    VALUES
        (
            -- DetailID - int
            @quantity, -- Quantity - int
            @orderID, -- OrderID - int
            @sizeID, -- SizeID - int
            @prodID -- ProductID - int
)
END
GO
CREATE PROC LoadOrderDetail
    @orderID int
AS
BEGIN
    SELECT *
    FROM dbo.ORDERDETAIL o
    WHERE o.OrderID=@orderID
END
GO
CREATE PROC Create_Size
    @id int,
    @sizeName nvarchar(250)
AS
BEGIN
    INSERT dbo.SIZE
        (
        SizeID,
        Size,
        CreatedDate
        )
    VALUES
        (
            @id,
            @sizeName, -- Size - NVARCHAR
            GETDATE() -- CreatedDate - DATETIME
)
END 
GO